//app.js

//                –î–∞–Ω–Ω–∏
// =============================================
const products = [
  { id: 1, name: "–ú–ª—è–∫–æ", category: "–ú–ª–µ—á–Ω–∏", calories: 60, protein: 3.2, fat: 3.3, carbs: 5, fiber: 0 },
  { id: 2, name: "–ö—Ä–∞–≤–µ –º–∞—Å–ª–æ", category: "–ú–ª–µ—á–Ω–∏", calories: 717, protein: 0.85, fat: 81, carbs: 0.1, fiber: 0 },
  { id: 3, name: "–Ø–π—Ü–∞", category: "–ú–ª–µ—á–Ω–∏", calories: 155, protein: 13, fat: 11, carbs: 1.1, fiber: 0 },
  { id: 4, name: "–ö–∞–π–º–∞", category: "–ú–µ—Å–æ", calories: 250, protein: 17, fat: 20, carbs: 0, fiber: 0 },
  { id: 5, name: "–ü–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ", category: "–ú–µ—Å–æ", calories: 165, protein: 31, fat: 3.6, carbs: 0, fiber: 0 },
  { id: 6, name: "–ú–æ—Ä–∫–æ–≤–∏", category: "–ó–µ–ª–µ–Ω—á—É—Ü–∏", calories: 41, protein: 0.9, fat: 0.2, carbs: 10, fiber: 2.8 },
  { id: 7, name: "–î–æ–º–∞—Ç–∏", category: "–ó–µ–ª–µ–Ω—á—É—Ü–∏", calories: 18, protein: 0.9, fat: 0.2, carbs: 3.9, fiber: 1.2 },
  { id: 8, name: "–Ø–±—ä–ª–∫–∏", category: "–ü–ª–æ–¥–æ–≤–µ", calories: 52, protein: 0.3, fat: 0.2, carbs: 14, fiber: 2.4 },
  { id: 9, name: "–ë–∞–Ω–∞–Ω–∏", category: "–ü–ª–æ–¥–æ–≤–µ", calories: 89, protein: 1.1, fat: 0.3, carbs: 23, fiber: 2.6 },
  { id: 10, name: "–®–æ–∫–æ–ª–∞–¥", category: "–°–ª–∞–¥–∫–æ", calories: 546, protein: 4.9, fat: 31, carbs: 61, fiber: 3 },
  { id: 11, name: "–ú–µ–¥", category: "–°–ª–∞–¥–∫–æ", calories: 304, protein: 0.3, fat: 0, carbs: 82, fiber: 0.2 },
  { id: 12, name: "–ö–∏–Ω–æ–∞", category: "–ó—ä—Ä–Ω–µ–Ω–∏", calories: 120, protein: 4.4, fat: 1.9, carbs: 21, fiber: 2.8 },
  { id: 13, name: "–ë–∞–¥–µ–º–∏", category: "–°–ª–∞–¥–∫–æ", calories: 579, protein: 21, fat: 50, carbs: 22, fiber: 12 },
  { id: 14, name: "–ö–æ–∑–µ —Å–∏—Ä–µ–Ω–µ", category: "–ú–ª–µ—á–Ω–∏", calories: 364, protein: 21, fat: 30, carbs: 1.0, fiber: 0 },
  { id: 15, name: "–°–ø–∞–Ω–∞–∫", category: "–ó–µ–ª–µ–Ω—á—É—Ü–∏", calories: 23, protein: 2.9, fat: 0.4, carbs: 3.6, fiber: 2.2 },
  { id: 16,  name: "–ö–∏–Ω–æ–∞", category: "–ó—ä—Ä–Ω–µ–Ω–∏", calories:350, protein: 14, fat:6.1, carbs:64, fiber:7 },
  { id: 17,  name: "–ë–∞–¥–µ–º–∏", category: "–Ø–¥–∫–∏", calories:605, protein :20, fat:52, carbs:13, fiber:9},

];

const popularRecipes = [
  { title: "–ü–∏—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞", desc: "–¢–µ—Å—Ç–æ, –¥–æ–º–∞—Ç–∏, –º–æ—Ü–∞—Ä–µ–ª–∞, –±–æ—Å–∏–ª–µ–∫" },
  { title: "–ó–µ–ª–µ–Ω—á—É–∫–æ–≤–∞ —Å—É–ø–∞", desc: "–ú–æ—Ä–∫–æ–≤–∏, –∫–∞—Ä—Ç–æ—Ñ–∏, –ª—É–∫, —á–µ—Å—ä–Ω" },
  { title: "–ü–∞–ª–∞—á–∏–Ω–∫–∏", desc: "–Ø–π—Ü–∞, –º–ª—è–∫–æ, –±—Ä–∞—à–Ω–æ, –º–µ–¥" },
  { title: "–®–æ–∫–æ–ª–∞–¥–æ–≤ –º—É—Å", desc: "–®–æ–∫–æ–ª–∞–¥, —è–π—Ü–∞, —Å–º–µ—Ç–∞–Ω–∞" }
];

const newProducts = [
  
  { name: "–°–ø–∞–Ω–∞–∫", category: "–ó–µ–ª–µ–Ω—á—É—Ü–∏" }
];

const recipes = [
  {
    title: "–Ø–π—Ü–µ –Ω–∞ –æ—á–∏",
    level: "–ª–µ—Å–Ω–æ",
    ingredients: [3],
    steps: [
      "–ó–∞–≥—Ä–µ–π—Ç–µ —Ç–∏–≥–∞–Ω –Ω–∞ —Å—Ä–µ–¥–Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞.",
      "–†–∞–∑–±–∏–π—Ç–µ —è–π—Ü–µ—Ç–æ –∏ –≥–æ –∏–∑—Å–∏–ø–µ—Ç–µ –≤ —Ç–∏–≥–∞–Ω–∞.",
      "–ì–æ—Ç–≤–µ—Ç–µ 2-3 –º–∏–Ω—É—Ç–∏ –∏ —Å–µ—Ä–≤–∏—Ä–∞–π—Ç–µ."
    ],
    description: "–ë—ä—Ä–∑–æ –∏ –ª–µ—Å–Ω–æ —è—Å—Ç–∏–µ –∑–∞ —Å—Ç—É–¥–µ–Ω—Ç–∏. –û—Ç–ª–∏—á–µ–Ω –∏–∑—Ç–æ—á–Ω–∏–∫ –Ω–∞ –ø—Ä–æ—Ç–µ–∏–Ω."
  },
  {
    title: "–°–∞–Ω–¥–≤–∏—á —Å –ø–∏–ª–µ –∏ —Å–ø–∞–Ω–∞–∫",
    level: "–ª–µ—Å–Ω–æ",
    ingredients: [5,15],
    steps: [
      "–ò–∑–ø–µ—á–µ—Ç–µ –ø–∏–ª–µ—à–∫–æ—Ç–æ —Ñ–∏–ª–µ.",
      "–ù–∞–ø—Ä–∞–≤–µ—Ç–µ —Å–∞–Ω–¥–≤–∏—á —Å —Ö–ª—è–±, –ø–∏–ª–µ –∏ —Å–ø–∞–Ω–∞–∫.",
      "–°–µ—Ä–≤–∏—Ä–∞–π—Ç–µ —Å –¥–æ–º–∞—Ç –∏ –º–∞–ª–∫–æ –º–µ–¥."
    ],
    description: "–õ–µ–∫–∞ –∏ –ø–∏—Ç–∞—Ç–µ–ª–Ω–∞ —Ö—Ä–∞–Ω–∞, –ø–æ–¥—Ö–æ–¥—è—â–∞ –∑–∞ –∑–∞–∫—É—Å–∫–∞ –∏–ª–∏ –æ–±—è–¥."
  },
  {
    title: "–ö–∏–Ω–æ–∞ —Å—ä—Å –∑–µ–ª–µ–Ω—á—É—Ü–∏",
    level: "—Ç—Ä—É–¥–Ω–æ",
    ingredients: [12,6,7,15],
    steps: [
      "–°–≤–∞—Ä–µ—Ç–µ 1 —á–∞—à–∞ –∫–∏–Ω–æ–∞ –≤ 2 —á–∞—à–∏ –≤–æ–¥–∞ –∑–∞ –æ–∫–æ–ª–æ 15 –º–∏–Ω—É—Ç–∏.",
      "–ù–∞—Ä–µ–∂–µ—Ç–µ –º–æ—Ä–∫–æ–≤–∏—Ç–µ, –¥–æ–º–∞—Ç–∏—Ç–µ –∏ —Å–ø–∞–Ω–∞–∫–∞ –Ω–∞ –º–∞–ª–∫–∏ –ø–∞—Ä—á–µ—Ç–∞.",
      "–ó–∞–ø—ä—Ä–∂–µ—Ç–µ –∑–µ–ª–µ–Ω—á—É—Ü–∏—Ç–µ –≤ –º–∞–ª–∫–æ –∑–µ—Ö—Ç–∏–Ω –∑–∞ 5 –º–∏–Ω—É—Ç–∏.",
      "–°–º–µ—Å–µ—Ç–µ —Å–≤–∞—Ä–µ–Ω–∞—Ç–∞ –∫–∏–Ω–æ–∞ —Å—ä—Å –∑–µ–ª–µ–Ω—á—É—Ü–∏—Ç–µ.",
      "–ü–æ–¥–ø—Ä–∞–≤–µ—Ç–µ —Å—ä—Å —Å–æ–ª, —á–µ—Ä–µ–Ω –ø–∏–ø–µ—Ä –∏ –ª–∏–º–æ–Ω–æ–≤ —Å–æ–∫."
    ],
    description: "–ü—ä–ª–Ω–æ—Ü–µ–Ω–Ω–æ —è—Å—Ç–∏–µ, –±–æ–≥–∞—Ç–æ –Ω–∞ –ø—Ä–æ—Ç–µ–∏–Ω–∏, —Ñ–∏–±—Ä–∏ –∏ –≤–∏—Ç–∞–º–∏–Ω–∏. –û—Ç–ª–∏—á–µ–Ω –∏–∑–±–æ—Ä –∑–∞ –∑–¥—Ä–∞–≤–æ—Å–ª–æ–≤–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–µ."
  },
  {
    title: "–®–æ–∫–æ–ª–∞–¥–æ–≤ –º—É—Å",
    level: "—Ç—Ä—É–¥–Ω–æ",
    ingredients: [10,3],
    steps: [
      "–†–∞–∑—Ç–æ–ø–µ—Ç–µ —à–æ–∫–æ–ª–∞–¥–∞ –Ω–∞ –≤–æ–¥–Ω–∞ –±–∞–Ω—è.",
      "–†–∞–∑–±–∏–π—Ç–µ —è–π—Ü–∞—Ç–∞ –∏ –¥–æ–±–∞–≤–µ—Ç–µ —à–æ–∫–æ–ª–∞–¥–∞.",
      "–û—Ö–ª–∞–¥–µ—Ç–µ –∑–∞ 2 —á–∞—Å–∞ –≤ —Ö–ª–∞–¥–∏–ª–Ω–∏–∫ –ø—Ä–µ–¥–∏ —Å–µ—Ä–≤–∏—Ä–∞–Ω–µ."
    ],
    description: "–î–µ—Å–µ—Ä—Ç —Å –≤–∏—Å–æ–∫–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ—Ç–µ–∏–Ω –∏ –º–∞–∑–Ω–∏–Ω–∏, –∏–¥–µ–∞–ª–µ–Ω –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏."
  }
];


//                –ö–æ—à–Ω–∏—Ü–∞

let cart = [];


//                DOM –µ–ª–µ–º–µ–Ω—Ç–∏

let productList, itemsContainer, cartEmpty, countTag, recipeBox, recipeText;
let clearBtn, generateBtn, popularContainer, newContainer, categoryChips, searchInput, searchBtn;


//                –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

document.addEventListener("DOMContentLoaded", () => {
  productList = document.getElementById("productList");
  itemsContainer = document.getElementById("itemsContainer");
  cartEmpty = document.getElementById("cartEmpty");
  countTag = document.getElementById("countTag");
  recipeBox = document.getElementById("recipeBox");
  recipeText = document.getElementById("recipeText");
  clearBtn = document.getElementById("clearBtn");
  generateBtn = document.getElementById("generateBtn");
  popularContainer = document.getElementById("popularRecipes");
  newContainer = document.getElementById("newProducts");
  categoryChips = document.querySelectorAll(".chip");
  searchInput = document.getElementById("searchInput");
  searchBtn = document.getElementById("searchBtn");

  renderProducts(products);
  renderPopular();
  renderNew();
  updateCart();

  clearBtn.addEventListener("click", () => {
    cart = [];
    updateCart();
    recipeBox.style.display="none";
  });

  generateBtn.addEventListener("click", generateRecipe);

  categoryChips.forEach(chip => {
    chip.addEventListener("click", () => {
      categoryChips.forEach(c => c.classList.remove("active"));
      chip.classList.add("active");
      const cat = chip.dataset.category;
      if(cat==="all") renderProducts(products);
      else renderProducts(products.filter(p => p.category===cat));
    });
  });

  searchBtn.addEventListener("click", () => {
    const term = searchInput.value.toLowerCase();
    const filtered = products.filter(p => p.name.toLowerCase().includes(term));
    renderProducts(filtered);
  });

});


//                –†–µ–Ω–¥–µ—Ä –ø—Ä–æ–¥—É–∫—Ç–∏

function renderProducts(list){
  productList.innerHTML = "";
  list.forEach(p => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <div class="p-thumb">${p.name.charAt(0)}</div>
      <div class="p-info">
        <div class="p-name">${p.name}</div>
        <div class="p-cat">${p.category}</div>
        <div class="p-nutrition">–ö–∞–ª: ${p.calories} | –ü—Ä: ${p.protein} | –ú: ${p.fat} | –í: ${p.carbs} | –§: ${p.fiber}</div>
      </div>
      <button class="add-btn">–î–æ–±–∞–≤–∏</button>
    `;
    div.querySelector("button").addEventListener("click", ()=>addToCart(p));
    productList.appendChild(div);
  });
}


//                –î–æ–±–∞–≤—è–Ω–µ/–ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ

function addToCart(product) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –ø—Ä–æ–¥—É–∫—Ç—ä—Ç –≤–µ—á–µ –µ –≤ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞
  const existing = cart.find(i => i.id === product.id);
  
  if (!existing) {
    // –ê–∫–æ –≥–æ –Ω—è–º–∞, –¥–æ–±–∞–≤—è–º–µ –≥–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 1
    cart.push({ ...product, qty: 1 });
  } else {
    // –ê–∫–æ –≥–æ –∏–º–∞, —É–≤–µ–ª–∏—á–∞–≤–∞–º–µ –±—Ä–æ–π–∫–∞—Ç–∞
    existing.qty += 1;
  }

  // –°–∞–º–æ –æ–±–Ω–æ–≤—è–≤–∞–º–µ –≤–∏–∑—É–∞–ª–Ω–æ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞
  updateCart(); 
}

function removeFromCart(id){
  cart = cart.filter(i=>i.id!==id);
  updateCart();
}


//                –û–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞

function updateCart(){
  itemsContainer.innerHTML="";
  if(cart.length===0){
    cartEmpty.style.display="block";
    itemsContainer.style.display="none";
  } else {
    cartEmpty.style.display="none";
    itemsContainer.style.display="flex";
    cart.forEach(item=>{
      const div = document.createElement("div");
      div.className="item";
      div.innerHTML=`
        <div class="qty">${item.qty}</div>
        <div class="meta">
          <div class="name">${item.name}</div>
          <div class="small">${item.category}</div>
        </div>
        <button class="add-btn">‚ùå</button>
      `;
      div.querySelector("button").addEventListener("click",()=>removeFromCart(item.id));
      itemsContainer.appendChild(div);
    });
  }
  countTag.textContent=`${cart.length} –ø—Ä–æ–¥—É–∫—Ç–∞`;
}

function generateRecipe() {
  if (cart.length === 0) {
    recipeText.textContent = "–ö–æ—à–Ω–∏—Ü–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞! –î–æ–±–∞–≤–µ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏ –ø—ä—Ä–≤–æ.";
    recipeBox.style.display = "block";
    return;
  }

  const cartIds = cart.map(i => i.id);

  // --- –ü–†–û–ú–ï–ù–ï–ù–ê –ß–ê–°–¢ ---
  // –í–º–µ—Å—Ç–æ .find(), –ø–æ–ª–∑–≤–∞–º–µ .filter() –∏ —Å–æ—Ä—Ç–∏—Ä–∞–Ω–µ
  const possibleRecipes = recipes.filter(r => r.ingredients.every(id => cartIds.includes(id)));
  
  // –°–æ—Ä—Ç–∏—Ä–∞–º–µ –ø–æ –±—Ä–æ–π —Å—ä—Å—Ç–∞–≤–∫–∏ (–Ω–∏–∑—Ö–æ–¥—è—â —Ä–µ–¥) -> –Ω–∞–π-–±–æ–≥–∞—Ç–∞—Ç–∞ —Ä–µ—Ü–µ–ø—Ç–∞ –ø–µ—á–µ–ª–∏
  possibleRecipes.sort((a, b) => b.ingredients.length - a.ingredients.length);
  
  let matchedRecipe = possibleRecipes.length > 0 ? possibleRecipes[0] : null;


  // 2. –õ–æ–≥–∏–∫–∞ –∑–∞ "–ø–æ—á—Ç–∏ —Å—ä–≤–ø–∞–¥–µ–Ω–∏–µ" (–∞–∫–æ –Ω—è–º–∞–º–µ matchedRecipe)
  if (!matchedRecipe) {
    // ... (—Å—Ç–∞—Ä–∏—è—Ç —Ç–∏ –∫–æ–¥ –∑–∞ almostMatch —Å–∏ –æ—Å—Ç–∞–≤–∞ —Ç—É–∫)
    let almostMatch = recipes.find(r => {
       const missing = r.ingredients.filter(id => cartIds.includes(id));
       return missing.length > 0 && missing.length <= 2;
    });
    // –ê–∫–æ —Å–º–µ –Ω–∞–º–µ—Ä–∏–ª–∏ —Ç–∞–∫–∞–≤–∞ "–ø–æ—á—Ç–∏" —Ä–µ—Ü–µ–ø—Ç–∞
    if (almostMatch) {
      const missingIds = almostMatch.ingredients.filter(id => !cartIds.includes(id));
      const missingProducts = products.filter(p => missingIds.includes(p.id));
      const names = missingProducts.map(p => p.name).join(", ");

      // –¢–£–ö –ø–∏—Ç–∞–º–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è (—Å–∞–º–æ —Å–ª–µ–¥ –Ω–∞—Ç–∏—Å–∫–∞–Ω–µ –Ω–∞ –±—É—Ç–æ–Ω–∞)
      if (confirm(`–ó–∞ —Ä–µ—Ü–µ–ø—Ç–∞—Ç–∞ "${almostMatch.title}" –≤–∏ –ª–∏–ø—Å–≤–∞—Ç: ${names}.\n–ò—Å–∫–∞—Ç–µ –ª–∏ –¥–∞ –≥–∏ –¥–æ–±–∞–≤—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ? üçΩÔ∏è`)) {
        
        // –î–æ–±–∞–≤—è–º–µ –ª–∏–ø—Å–≤–∞—â–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏
        missingProducts.forEach(p => {
            const ex = cart.find(i => i.id === p.id);
            if(!ex) cart.push({...p, qty: 1});
            // –ê–∫–æ –∏—Å–∫–∞—à –¥–∞ —Å–µ —É–≤–µ–ª–∏—á–∞–≤–∞ –±—Ä–æ–π–∫–∞—Ç–∞ –∞–∫–æ –≥–æ –∏–º–∞: else ex.qty++;
        });
        
        updateCart(); // –û–±–Ω–æ–≤—è–≤–∞–º–µ –≤–∏–∑–∏—è—Ç–∞ –Ω–∞ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞
        matchedRecipe = almostMatch; // –í–µ—á–µ –∏–º–∞–º–µ —Ä–µ—Ü–µ–ø—Ç–∞ –∑–∞ –ø–æ–∫–∞–∑–≤–∞–Ω–µ!
      }
    }
  }

  // –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –æ–±—â–∏—Ç–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç–∏ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥–∞–ª–∏ –∏–º–∞ —Ä–µ—Ü–µ–ø—Ç–∞ –∏–ª–∏ –Ω–µ)
  const total = cart.reduce((acc, item) => ({
    calories: acc.calories + item.calories * item.qty,
    protein: acc.protein + item.protein * item.qty,
    fat: acc.fat + item.fat * item.qty,
    carbs: acc.carbs + item.carbs * item.qty,
    fiber: acc.fiber + item.fiber * item.qty
  }), { calories: 0, protein: 0, fat: 0, carbs: 0, fiber: 0 });

  // 3. –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞
  if (matchedRecipe) {
    // –ò–º–∞–º–µ —Ä–µ—Ü–µ–ø—Ç–∞ (–∏–ª–∏ —Ç–æ—á–Ω–∞, –∏–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –µ –ø—Ä–∏–µ–ª –¥–∞ –¥–æ–±–∞–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ)
    recipeText.textContent = `${matchedRecipe.title} (${matchedRecipe.level})\n\n` + 
                             `–û–ø–∏—Å–∞–Ω–∏–µ: ${matchedRecipe.description}\n\n` +
                             `–°—Ç—ä–ø–∫–∏:\n${matchedRecipe.steps.map((s, i) => `${i + 1}. ${s}`).join("\n")}\n\n` +
                             `--- –•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞ ---\n` +
                             `–ö–∞–ª–æ—Ä–∏–∏: ${total.calories.toFixed(0)} kcal | –ü—Ä–æ—Ç–µ–∏–Ω: ${total.protein.toFixed(1)} g | ` +
                             `–ú–∞–∑–Ω–∏–Ω–∏: ${total.fat.toFixed(1)} g | –í—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏: ${total.carbs.toFixed(1)} g`;
  } else {
    // –ù—è–º–∞ —Ä–µ—Ü–µ–ø—Ç–∞ –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –µ –æ—Ç–∫–∞–∑–∞–ª –¥–æ–±–∞–≤—è–Ω–µ –∏–ª–∏ –Ω—è–º–∞ –±–ª–∏–∑–∫–∏ —Å—ä–≤–ø–∞–¥–µ–Ω–∏—è
    recipeText.textContent = `–ù–µ –æ—Ç–∫—Ä–∏—Ö–º–µ —Ç–æ—á–Ω–∞ —Ä–µ—Ü–µ–ø—Ç–∞ —Å —Ç–µ–∑–∏ –ø—Ä–æ–¥—É–∫—Ç–∏, –Ω–æ –µ—Ç–æ –∫–∞–∫–≤–æ —Å—ä–¥—ä—Ä–∂–∞ –≤–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞:\n\n` + 
                             `–ü—Ä–æ–¥—É–∫—Ç–∏: ${cart.map(i => i.name).join(", ")}\n\n` +
                             `--- –û–±—â–∏ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ ---\n` +
                             `–ö–∞–ª–æ—Ä–∏–∏: ${total.calories.toFixed(0)} kcal\n` +
                             `–ü—Ä–æ—Ç–µ–∏–Ω: ${total.protein.toFixed(1)} g\n` +
                             `–ú–∞–∑–Ω–∏–Ω–∏: ${total.fat.toFixed(1)} g\n` +
                             `–í—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏: ${total.carbs.toFixed(1)} g\n` +
                             `–§–∏–±—Ä–∏: ${total.fiber.toFixed(1)} g`;
  }

  recipeBox.style.display = "block";
}


//                –†–µ–Ω–¥–µ—Ä –ø–æ–ø—É–ª—è—Ä–Ω–∏ –∏ –Ω–æ–≤–∏

function renderPopular(){
  popularContainer.innerHTML="";
  popularRecipes.forEach(r=>{
    const div=document.createElement("div");
    div.className="recipe-card";
    div.innerHTML=`<h4>${r.title}</h4><p>${r.desc}</p>`;
    popularContainer.appendChild(div);
  });
}

function renderNew(){
  newContainer.innerHTML="";
  newProducts.forEach(p=>{
    const div=document.createElement("div");
    div.className="product-card";
    div.innerHTML=`<h4>${p.name}</h4><p>${p.category}</p>`;
    newContainer.appendChild(div);
  });
}

// index.HTML

<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–í–∫—É—Å–Ω–∞ –ö–æ—à–Ω–∏—Ü–∞ üçΩÔ∏è</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- –§–æ–Ω -->
  <div class="background"></div>

  <!-- –•–µ–¥—ä—Ä -->
  <header class="topbar">
    <div class="brand">üçÉ –í–∫—É—Å–Ω–∞ –ö–æ—à–Ω–∏—Ü–∞</div>
    <nav class="nav">
      <a href="#" class="active">–ù–∞—á–∞–ª–æ</a>
      <a href="#">–†–µ—Ü–µ–ø—Ç–∏</a>
      <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç</a>
    </nav>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ -->
  <div class="app aesthetic">

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª–Ω–∞ —á–∞—Å—Ç: –∫–æ—à–Ω–∏—Ü–∞ + —Ä–µ—Ü–µ–ø—Ç–∏ -->
    <main class="center glass">
      <div class="panel" id="mainPanel">

        <!-- –ö–æ—à–Ω–∏—Ü–∞ -->
        <div class="header">
          <div>
            <div class="title">üõí –í–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—Ü–∞</div>
            <div class="subtitle">–î–æ–±–∞–≤–µ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏ –∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞–π—Ç–µ –≤–∫—É—Å–Ω–∞ —Ä–µ—Ü–µ–ø—Ç–∞ ‚ú®</div>
          </div>
          <div class="tag" id="countTag">0 –ø—Ä–æ–¥—É–∫—Ç–∞</div>
        </div>

        <div class="cart glass" id="cart">
          <div class="cart-empty" id="cartEmpty">
            <p>–ö–æ—à–Ω–∏—Ü–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞ üå∏</p>
            <p>–ò–∑–±–µ—Ä–µ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏ –æ—Ç –¥—è—Å–Ω–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∞.</p>
          </div>
          <div class="items" id="itemsContainer" style="display:none"></div>
          <div class="controls">
            <button class="btn pastel" id="clearBtn">–ò–∑—á–∏—Å—Ç–∏ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞</button>
            <button class="btn primary pastel" id="generateBtn">–ì–µ–Ω–µ—Ä–∏—Ä–∞–π —Ä–µ—Ü–µ–ø—Ç–∞ üçΩÔ∏è</button>
          </div>
          <div class="recipe" id="recipeBox" style="display:none">
            <h3>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞ —Ä–µ—Ü–µ–ø—Ç–∞</h3>
            <pre id="recipeText">–î–æ–±–∞–≤–µ—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏ –∏ –Ω–∞—Ç–∏—Å–Ω–µ—Ç–µ "–ì–µ–Ω–µ—Ä–∏—Ä–∞–π —Ä–µ—Ü–µ–ø—Ç–∞".</pre>
          </div>
        </div>

        <!-- –ü–æ–ø—É–ª—è—Ä–Ω–∏ —Ä–µ—Ü–µ–ø—Ç–∏ -->
        <section class="popular-recipes">
          <h3>‚ú® –ü–æ–ø—É–ª—è—Ä–Ω–∏ —Ä–µ—Ü–µ–ø—Ç–∏</h3>
          <div class="recipe-cards" id="popularRecipes"></div>
        </section>

        <!-- –ù–æ–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ -->
        <section class="new-products">
          <h3>üÜï –ù–æ–≤–∏ –ø—Ä–æ–¥—É–∫—Ç–∏</h3>
          <div class="product-cards" id="newProducts"></div>
        </section>

      </div>
    </main>

    <!-- –°—Ç—Ä–∞–Ω–∏—á–Ω–∞ –ª–µ–Ω—Ç–∞: –∫–∞—Ç–∞–ª–æ–≥ -->
    <aside class="sidebar glass">
      <div class="catalog" id="catalog">
        <div class="catalog-header">
          <h2>üõçÔ∏è –ö–∞—Ç–∞–ª–æ–≥</h2>
          <p>–¢—ä—Ä—Å–µ—Ç–µ –∏ –¥–æ–±–∞–≤—è–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏</p>
        </div>

        <!-- –¢—ä—Ä—Å–µ–Ω–µ -->
        <div class="search">
          <input placeholder="üîç –¢—ä—Ä—Å–∏ –ø—Ä–æ–¥—É–∫—Ç–∏..." id="searchInput" />
          <button id="searchBtn">–¢—ä—Ä—Å–∏</button>
        </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="categories">
          <h4>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
          <div class="category-chips" id="categoryChips">
            <span class="chip active" data-category="all">–í—Å–∏—á–∫–∏</span>
            <span class="chip" data-category="–ú–ª–µ—á–Ω–∏">–ú–ª–µ—á–Ω–∏</span>
            <span class="chip" data-category="–ú–µ—Å–æ">–ú–µ—Å–æ</span>
            <span class="chip" data-category="–ó–µ–ª–µ–Ω—á—É—Ü–∏">–ó–µ–ª–µ–Ω—á—É—Ü–∏</span>
            <span class="chip" data-category="–ü–ª–æ–¥–æ–≤–µ">–ü–ª–æ–¥–æ–≤–µ</span>
            <span class="chip" data-category="–°–ª–∞–¥–∫–æ">–°–ª–∞–¥–∫–æ</span>
          </div>
        </div>

        <!-- –ü—Ä–æ–¥—É–∫—Ç–∏ -->
        <div id="productList" class="product-list"></div>

        <!-- –î–µ–∫–æ—Ä–∞—Ü–∏–∏ -->
        <div class="decor-icons">
          <span>ü•ï</span>
          <span>üçû</span>
          <span>ü•õ</span>
          <span>üßà</span>
          <span>üçÖ</span>
        </div>

      </div>
    </aside>

  </div>

  <!-- –§—É—Ç—ä—Ä -->
  <footer class="footer">
    <p>üåø –°—ä–∑–¥–∞–¥–µ–Ω–æ —Å –≤–∫—É—Å –∏ –æ–±–∏—á</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>

style.css

/*                –û—Å–Ω–æ–≤–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏            */
/* ============================================= */

:root {
  --bg1: #f9f5f0;
  --bg2: #f3ede4;
  --card: rgba(255, 255, 255, 0.75);
  --accent: #f7b267;
  --accent-dark: #f4845f;
  --accent-light: #fce1c3;
  --muted: #5a5550;
  --radius: 20px;
  --shadow: 0 10px 30px rgba(0,0,0,0.08);
  --transition: all 0.3s ease;
  --font-primary: 'Poppins', sans-serif;
}

/* ============================================= */
/*                –û–±—â —Ñ–æ–Ω –∏ layout              */
/* ============================================= */
html, body {
  margin: 0;
  padding: 0;
  min-height: 100%;
  font-family: var(--font-primary);
  color: var(--muted);
  background: linear-gradient(160deg, var(--bg1), var(--bg2));
  display: flex;
  flex-direction: column;
}

.background {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1400&q=60') center/cover no-repeat;
  opacity: 0.15;
  z-index: -1;
}

/* ============================================= */
/*                –•–µ–¥—ä—Ä                         */
/* ============================================= */
.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 50px;
  background: rgba(255,255,255,0.45);
  backdrop-filter: blur(15px);
  box-shadow: var(--shadow);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.brand {
  font-size: 26px;
  font-weight: 700;
  color: var(--accent-dark);
}

.nav a {
  margin-left: 25px;
  text-decoration: none;
  color: var(--muted);
  font-weight: 500;
  transition: var(--transition);
}

.nav a:hover, .nav a.active {
  color: var(--accent-dark);
  transform: scale(1.05);
}

/* ============================================= */
/*                –û—Å–Ω–æ–≤–µ–Ω layout                */
/* ============================================= */
.app {
  display: flex;
  gap: 40px;
  padding: 40px;
  flex: 1;
  justify-content: center;
}

.glass {
  background: var(--card);
  backdrop-filter: blur(20px);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 20px;
}

/* ============================================= */
/*                –¶–µ–Ω—Ç—Ä–∞–ª–µ–Ω –ø–∞–Ω–µ–ª               */
/* ============================================= */
.panel {
  width: 750px;
  display: flex;
  flex-direction: column;
  gap: 25px;
  animation: fadeIn 0.8s ease forwards;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.title {
  font-size: 28px;
  font-weight: 700;
  color: var(--accent-dark);
}

.subtitle {
  font-size: 15px;
  color: var(--muted);
}

/* ============================================= */
/*                –ö–æ—à–Ω–∏—Ü–∞                        */
/* ============================================= */
.cart {
  border-radius: var(--radius);
  padding: 20px;
  background: rgba(255,255,255,0.55);
  min-height: 320px;
  border: 1px solid rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.cart-empty {
  text-align: center;
  font-size: 15px;
  padding: 40px 0;
  color: var(--muted);
}

/* ============================================= */
/*                –ü—Ä–æ–¥—É–∫—Ç–∏ –≤ –∫–æ—à–Ω–∏—Ü–∞—Ç–∞          */
/* ============================================= */
.items {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px;
  border-radius: var(--radius);
  background: rgba(255,255,255,0.8);
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  transition: var(--transition);
}

.item:hover {
  transform: scale(1.02);
}

.item .qty {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: var(--accent);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 16px;
}

.item .meta {
  display: flex;
  flex-direction: column;
  margin-left: 12px;
}

.item .meta .name {
  font-weight: 600;
}

.item .meta .small {
  font-size: 12px;
  color: var(--muted);
}

/* ============================================= */
/*                –†–µ—Ü–µ–ø—Ç–∞                        */
/* ============================================= */
.recipe {
  padding: 20px;
  background: rgba(255,255,255,0.75);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  transition: var(--transition);
}

.recipe h3 {
  margin: 0 0 12px 0;
  color: var(--accent-dark);
}

.recipe pre {
  background: rgba(255,255,255,0.85);
  padding: 14px;
  border-radius: 12px;
  font-size: 14px;
  white-space: pre-wrap;
}

/* ============================================= */
/*                –ü–æ–ø—É–ª—è—Ä–Ω–∏ —Ä–µ—Ü–µ–ø—Ç–∏              */
/* ============================================= */
.popular-recipes, .new-products {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.recipe-cards, .product-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 16px;
  overflow-x: auto;
  padding-bottom: 8px;
}

.recipe-card, .product-card {
  flex: 0 0 200px;
  background: rgba(255,255,255,0.75);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
  transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
  cursor: pointer;
}

.recipe-card:hover, .product-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.15);
  background: rgba(255,255,255,0.9);
}

.recipe-card h4, .product-card h4 {
  margin: 0 0 8px 0;
  font-size: 17px;
  color: var(--accent-dark);
  font-weight: 600;
}

.recipe-card p, .product-card p {
  font-size: 13px;
  color: var(--muted);
  line-height: 1.4;
}

/* ============================================= */
/*                –°—Ç—Ä–∞–Ω–∏—á–Ω–∞ –ª–µ–Ω—Ç–∞               */
/* ============================================= */
.sidebar {
  width: 350px;
  display: flex;
  flex-direction: column;
  gap: 25px;
}

.catalog-header h2 {
  font-size: 24px;
  color: var(--accent-dark);
  margin: 0;
  font-weight: 700;
}

.catalog-header p {
  margin: 6px 0 16px 0;
  font-size: 15px;
  color: var(--muted);
}

/* ============================================= */
/*                –¢—ä—Ä—Å–µ–Ω–µ                        */
/* ============================================= */
.search {
  display: flex;
  gap: 10px;
}

.search input {
  flex: 1;
  padding: 10px 12px;
  border-radius: var(--radius);
  border: 1px solid rgba(0,0,0,0.1);
  outline: none;
  background: rgba(255,255,255,0.6);
  font-size: 14px;
  transition: var(--transition);
}

.search input:focus {
  border-color: var(--accent-dark);
  background: rgba(255,255,255,0.85);
}

.search button {
  padding: 10px 16px;
  border-radius: var(--radius);
  border: none;
  background: var(--accent);
  color: white;
  font-weight: 700;
  cursor: pointer;
  transition: var(--transition);
}

.search button:hover {
  background: var(--accent-dark);
  transform: scale(1.05);
}

/* ============================================= */
/*                –ß–∏–ø–æ–≤–µ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)            */
/* ============================================= */
.categories h4 {
  font-size: 15px;
  margin: 0 0 6px 0;
  color: var(--accent-dark);
}

.category-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.chip {
  padding: 6px 12px;
  border-radius: 50px;
  background: var(--accent-light);
  font-size: 13px;
  cursor: pointer;
  transition: var(--transition);
  user-select: none;
}

.chip.active, .chip:hover {
  background: var(--accent);
  color: white;
}

/* ============================================= */
/*                –°–ø–∏—Å—ä–∫ —Å –ø—Ä–æ–¥—É–∫—Ç–∏             */
/* ============================================= */
.product-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
  padding: 10px 0;
}

.product {
  background: rgba(255,255,255,0.75);
  border-radius: var(--radius);
  padding: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  transition: var(--transition);
  cursor: pointer;
  box-shadow: var(--shadow);
}

.product:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 28px rgba(0,0,0,0.15);
}

.p-thumb {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
  background: var(--accent-light);
  color: var(--accent-dark);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.p-info .p-name {
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 4px;
}

.p-info .p-cat {
  font-size: 11px;
  color: var(--muted);
}

.p-info .p-nutrition {
  font-size: 10px;
  color: var(--muted);
  margin-top: 4px;
}

.add-btn {
  margin-top: 6px;
  padding: 6px 12px;
  border: none;
  border-radius: var(--radius);
  background: var(--accent);
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.add-btn:hover {
  background: var(--accent-dark);
  transform: scale(1.05);
}

/* ============================================= */
/*                –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∏ –∏–∫–æ–Ω–∏             */
/* ============================================= */
.decor-icons {
  display: flex;
  gap: 8px;
  justify-content: center;
}

.decor-icons span {
  font-size: 20px;
  animation: bounce 1.5s infinite;
}

@keyframes bounce {
  0%,100% { transform: translateY(0);}
  50% { transform: translateY(-6px);}
}

/* ============================================= */
/*                –ë—É—Ç–æ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏                 */
/* ============================================= */
.btn {
  border: none;
  border-radius: var(--radius);
  padding: 10px 16px;
  cursor: pointer;
  font-weight: 700;
  font-size: 14px;
  transition: var(--transition);
}

.btn.primary {
  background: var(--accent);
  color: white;
}

.btn.pastel {
  background: var(--accent-light);
  color: var(--accent-dark);
}

.btn:hover {
  transform: scale(1.05);
}

/* ============================================= */
/*                –§—É—Ç—ä—Ä                           */
/* ============================================= */
.footer {
  text-align: center;
  padding: 18px;
  font-size: 14px;
  background: rgba(255,255,255,0.4);
  backdrop-filter: blur(15px);
  box-shadow: var(--shadow);
  margin-top: auto;
  color: var(--accent-dark);
}

/* ============================================= */
/*                –ê–Ω–∏–º–∞—Ü–∏–∏                        */
/* ============================================= */
@keyframes fadeIn {
  from {opacity:0; transform: translateY(20px);}
  to {opacity:1; transform: translateY(0);}
}
